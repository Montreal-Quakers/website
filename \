---
---
@import "font";
@import "colors";
$mob-pixels: {{ site.breakpoint }};

// // These elements are for the wideheader only and so will be turned on with a media query
.wideheader,#widehome,#StickyScrollBegin,#StickyScrollBeginPadding,/*#searchsubmit,*/#unfold  {
   display: none;
}

.nav-toggle {
  position: absolute !important;
  top: -9999px !important;
  left: -9999px !important;

  &:focus ~ .nav-toggle-label {
    // outline: 3px solid rgba(lightblue, .75);
    outline: none;
  }
  &:hover ~ .nav-toggle-label {
    color: grey;
    // transition: color .3s;
  }
}

.logo__mobile {
  // padding: 10px;
  display: flex;
  align-items: center;
  height: 100%;
  &:hover {
    background: var(--active);
  }
  img {
    vertical-align: text-bottom;
  }
}

.nav-toggle-label {
  display: flex;
  align-items: center;
  padding: 10px;
  cursor: pointer;
  position: relative;
  // top: 40px;
  // left: 0;
  //margin-left: 1em;
  height: 100%;
  //height: 10px;
  &:hover {
    background: var(--active);
  }

  span, span::before, span::after {
    display: block;
    background: var(--card-hover);
    height: 2px;
    width: 2rem;
    border-radius: 2px;
    position: relative;
    transition: transform,width 350ms ease-in-out;//*, width, opacity*//
  }

  span::before, span::after {
    content: '';
    position: absolute;
  }

  span::before {
    bottom: 7px;
  }

  span::after {
    top: 7px;
  }
}

.nav-toggle:checked ~ nav {
  transform: scale(1,1);

  a,button {
    opacity: 1;
    transition: opacity 250ms ease-in-out 250ms;
  }
}

// Hamburger to X animation
.nav-toggle:checked ~ div .nav-toggle-label span {
   transform: rotate(45deg);
     height: 3px;
     width: 1rem;

   &::before {
     transform: translateY(6px)
                rotate(-90deg);
     width: 1rem;
   }
   &::after {
     transform: translateY(-6px)
                rotate(-90deg);
     width: 1rem;
   }
  // transition: all 300ms ease-in;
}

nav,nav input {
  font: {
    size: $nav-font-size;
    family: $font-sans;
  }
  text-align: left;
}

nav {
  color: var(--alert-text);
  background: var(--color-1-dark);
  z-index: 5;
  position: absolute;
  font-weight: bold; 
  text-align: left;
  overflow: hidden;
  top: 55px;
  left: 0;
  width: 100%;
  transform: scale(1, 0);
  transform-origin: top;
  transition: transform 400ms ease-in-out;

  i {
    transition: transform 100ms ease-in;
    vertical-align: middle;
  }

  ul {
    padding-left: 0;
    background: inherit;
    // text-indent: 5px;
    li {
      display: inline;
      list-style: none;
      width: 100%;
      padding-left: 0;
      vertical-align: middle;
      background: inherit;
    }
  }
  a,button {
    display: inline-block;
    opacity: 0;
    // background: transparent;
    color: var(--alert-text);
    text-decoration: none;
    font-weight: bold;
    border: none;
    padding: 14px 14px;
    transition: opacity 150ms ease-in-out;
    width: 100%;
    text-align: left;
    white-space: nowrap;
    // &:hover {
    //   background: var(--active);
    // }
  }
  button.dropbtn {background: inherit}
  a:hover,.active,ul .dropdown .active {
    background-color: var(--active);
  }
  // Search on narrow screens
  #searchForm {
    display: flex;
    align-items: center;
    position: relative;
  }
  #searchInput {
    padding: 16px 10px;
    flex: 1 1 100%;
    height: 100%;
    border: none;
  }
  #searchSubmit {
    flex: 0 1 50px;
    background: var(--color-1-light);
    cursor: pointer;
    // padding: 0;
    &:hover {
      background: var(--active);
    }
    i {
      vertical-align: initial;
    }
  }
  #languageChanger {
    cursor: pointer;
  }
}

.dropbtn {
  * {pointer-events: none;}
  &:focus {
    outline: none;
  }
}

{% assign counter = 0 %}
{% for item in site.data.navigation.en %}
  {% if item.submenu %}
    {% assign counter = counter | plus: 1 %}
    #dropdown_en{{ counter }} {
	    max-height: 0;
	    overflow: hidden;
	    transition: max-height .2s ease-out;
    }

    .dropdown_en{{ counter }}-container {
	    max-height: 0;
	    overflow: hidden;
	    transition: max-height .2s ease-out;
    }
    {% endif %}
{% endfor %}

{% assign counter = 0 %}
{% for item in site.data.navigation.fr %}
  {% if item.submenu %}
    {% assign counter = counter | plus: 1 %}
    #dropdown_fr{{ counter }} {
      max-height: 0;
      overflow: hidden;
      transition: max-height .2s ease-out;
      &:focus {
	outline: none;
	// background: transparent;
      }
    }
    {% endif %}
{% endfor %}

.dropdown-content {
  // box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  a  {
    color: var(--alert-text);
    display: block;
    // padding: 12px 14px;
    text-align: left;
    text-indent: 35px;
    background-color: var(--color-1);
    &:hover {
      background: var(--active); 
    }
  }
}

#narrowheader {
  display: grid;
  grid-auto-flow: column;
  grid-template-columns: clamp(5px, 15%, 55px) 1fr clamp(15px, 15%, 55px);
  place-items: center;
  background: var(--color-1-dark);
  color: var(--alert-text);
  text-decoration: none;
  text-align: center;
  height: 55px;
  font: {
     size: $mobile-header-font-size;
     family: $font-serif;
  }

  // letter-spacing: $serif-spacing;
  // white-space: nowrap;
}

.intersectionObserver {
  height: 0;
  background-color: transparent;
}
#intersectionObserver1 {
  position: absolute;
  top: 400px;
}

// WIDE screen
@media screen and (min-width: $mob-pixels) {

  // These elements are for the wideheader only and so will be turned on with a media query
  .wideheader,#widehome {
     display: block;
     opacity: 1;
  }

  #narrowhome,.nav-toggle-label,#narrowheader,.logo__mobile,#nav-toggle {
      display: none;
  }

  .wideheader {
    display: flex;
    padding: 40px 0px;
    justify-content: center;
    align-items: center;
    background: var(--color-1-dark);
    color: var(--alert-text);

    &__text {
      white-space: nowrap;
      font: {
        family: $font-serif;
        size: $header-font-size;}
      padding:20px 70px;
    }
  }
  nav {
     overflow: initial;
     position: sticky;
     transform: scale(1,1);
     top: 0;
     background: var(--color-1);
     a,button {
       opacity: 1;
       width: initial;
       height: 55px;
     }
     ul li {
       width: initial;
       display: inline-block;
     }
     ul {
       display: flex;
       flex-direction: row;
       justify-content: flex-start;
       align-items: center;
       margin: 0;
     }
     // Search on wide screens
     #searchForm {
       flex: 1 0 210px;
       height: 55px;
     }
     #searchSubmit {
       height: 55px;
     }
     #search-container {
       margin-left: auto;
       height: 55px;
     }

     .dropdown > ul {
       display: block;
       position: absolute;
       top: 55px;
       background: inherit;
       li a {
         background: inherit;
       }
     }
     .dropdown-content {
       max-height: initial;
       display: block;
       a {
         text-indent: 0px;
       }
     }
     // widescreen search
     input[type=search] {
         &.input_narrow {width: 1px}
         &.input_hide {visibility: hidden}
         &.input_show {
           width: 210px; 
           visibility: visible;
         }
     width: 1px; 
     font: {
       family: $font-sans;
       size: 1em;
       weight: normal;}
     flex: 1 1 auto;
     padding: 15.25px 10px;
     border: none;
     margin: 0;
     outline: none;
     transition: width 0.3s ease-in-out;
     background: var(--body-bg);
     color: var(--body-text);
     }
     .search-container {
        flex: 1 0 auto;
        display: flex;
        justify-content: flex-end;
        // max-width: 100%;
        align-items: center;
        margin: 0px 0 0;
        padding: 0;
 
        button {
           flex: 0 0 auto;
           padding: 14px;
           //  margin-right: 4px;
           background-color: var(--color-1-light);
           // font-size: 1em;
           border: none;
           transition: color 0.3s;
           cursor: pointer;
           &:hover {
            color: var(--anti-alert-text);
           }
        }
     }
  }
}
 
//   #response {cursor:pointer}
//   a,#response,button,.search-container {
//     display: block;
//     padding: 14px 11px;
//     color: var(--alert-text);
//     text-align: center;
//     font-family: $font-sans;
//     font-size: $nav-font-size;
//     font-weight: bold;
//     white-space: nowrap;
//   }
// }
// 
// // NARROW screen
// // @media screen and (max-width: $mob-pixels - 1) {
// 
// 
//     .dropdown {
//        // float: none;
//         .dropbtn {
//           display: block; 
//           width: 100%;
//           text-align: left;
//           cursor: pointer;
//         }
//      &-content {
//        position: relative;
//        background:var(--active); 
//        //padding: 0 0 0 15px;
//        text-indent: 0.8em;
//        &:before {
// //           content: &emsp;
//        }
//      }
//     }
//   // This is all still under .navbar.responsive
//   input[type=search], .search-container, #response, #narrowhome {
//     // float: none;
//     display: block;
//     text-align: left;
//     flex: 1 0 auto;
//     width: 100%;
//     border-radius: 0;
//     margin: 0;
//     padding-top: 14px;
//     padding-bottom: 14px;
//   }
//   input[type=search] {
//     border: 1px solid #ccc;
//     -webkit-appearance: none;
//     -moz-appearance:none;
// //      width: 98%;
//   }
//  }
// }
// // the goal of this code is to require a click to open a submenu in responsive mode
// .show_block {display:block;transform: scale(1)}
//  #searchForm {flex: 1 0 210px;}
// 
// 
//  .dropdown {
//     &:hover .dropdown-content {
//         transform: scale(1);
// 	transform-origin: top;
//     }
// 
//  .show {display: inline !important;}
//  .hide {display: none !important;}
// 
//   
// Keeping page anchors in the right place
.scroll_anchor{scroll-margin: 60px 0 0 0;}
.stanchor {
  position: relative;
     a {
        position: absolute;
        left: 0px;
        top: -60px;
      } 
 }

// Breadcrumb menu

ul.breadcrumb {
  padding: 10px 16px;
  list-style: none;
  background-color: var(--card-hover);
  margin: 0;
}
ul.breadcrumb li {
  display: inline;
  //font-size: $body-font-size;
  font-family: $font-sans;
  font-size: $nav-font-size;
  font-weight: bold;
  // color: var(--alert-text);
}
ul.breadcrumb li+li:before {
  padding: 8px;
  content: "/\00a0";
}

@import "animations";
